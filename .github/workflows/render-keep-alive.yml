name: Render Keep Alive

on:
  schedule:
    - cron: "*/10 * * * *"
  workflow_dispatch:
    inputs:
      override:
        description: "Temporarily run a manual ping"
        required: false

env:
  SERVICE_URL: https://jules-coderabbit.onrender.com/health

jobs:
  ping:
    if: vars.RENDER_KEEP_ALIVE_ENABLED != 'false'
    runs-on: ubuntu-latest
    steps:
      - name: Warm Render service
        run: |
          set -euo pipefail
          echo "Pinging ${{ env.SERVICE_URL }}"
          curl --fail --silent --show-error "${{ env.SERVICE_URL }}" || echo "Ping failed"

